<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fagblikk 2025</title>
  <link rel="manifest" href="manifest.json">
  <link href="https://fonts.googleapis.com/css2?family=UnifrakturMaguntia&family=Cormorant+Garamond:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Cormorant Garamond', serif;
      margin: 0;
      padding: 0;
      background: #f4eee5;
      color: #3e3625;
    }
    header, section {
      padding: 1.5rem;
    }
    h1, h2 {
      text-align: center;
      font-family: 'UnifrakturMaguntia', cursive;
    }
    .countdown {
      font-size: 2rem;
      text-align: center;
      margin: 1rem 0;
    }
    .tiles {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      max-width: 600px;
      margin: 1rem auto;
    }
    .tile {
      background: linear-gradient(145deg, #e1d8c0, #dfd0b5);
      padding: 1rem;
      text-align: center;
      border-radius: 12px;
      border: 2px solid #c5a05a;
      box-shadow: inset 0 0 10px rgba(0,0,0,0.15);
      text-decoration: none;
      color: #3e3625;
      font-weight: bold;
      cursor: pointer;
      position: relative;
    }
    .tile:hover {
      background: #e9ddc5;
    }
    .tile-full {
      grid-column: span 2;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      background: #fffaf0;
      padding: 0.8rem;
      margin: 0.5rem 0;
      border-radius: 8px;
      display: flex;
      align-items: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    input[type="checkbox"] {
      margin-right: 1rem;
    }
    img, video {
      max-width: 100%;
      border-radius: 8px;
      margin-top: 1rem;
    }
    .page {
      display: none;
    }
    .page.active {
      display: block;
    }
    .back-button {
      display: block;
      margin: 1rem auto;
      text-align: center;
      color: #8b0000;
      text-decoration: underline;
      cursor: pointer;
    }
    footer {
      text-align: center;
      font-size: 0.9rem;
      margin-top: 2rem;
      color: #888;
      padding-bottom: 2rem;
    }
    .choice-button {
      background: #e1d8c0;
      border: 2px solid #c5a05a;
      border-radius: 10px;
      padding: 1rem;
      margin: 0.5rem 0;
      cursor: pointer;
      font-weight: bold;
    }
    .choice-button:hover {
      background: #f0e6ce;
    }
  </style>
</head>
<body>
  <header>
    <h1>Fagblikk 2025</h1>
    <div class="countdown" id="countdown"></div>
  </header>

  <section id="menu" class="page active">
    <div class="tiles">
      <div class="tile tile-full" onclick="navigate('worldoffagcraft')">World of Fagcraft 🛡️</div>
      <div class="tile" onclick="navigate('sjekkliste')">Ølutfordring 🍺</div>
      <div class="tile" onclick="navigate('fly')">Potensielle flyvninger ✈️</div>
      <div class="tile" onclick="navigate('overnatting')">Overnatting 🛏️</div>
      <div class="tile" onclick="navigate('deltakere')">Deltakerliste 👥</div>
      <div class="tile" onclick="navigate('gir')">Kontingentet gir 💰</div>
      <div class="tile" onclick="navigate('tar')">Kontingentet tar 🧾</div>
      <div class="tile" onclick="navigate('lopere')">Kontingentets løpere 🏃‍♂️</div>
      <div class="tile" onclick="navigate('mykle')">Mykle 👑</div>
      <div class="tile tile-full" onclick="incrementCounter()" id="enge-tile">
        Eirik Enge-counter 👀: <span id="enge-count">0</span>
      </div>
    </div>
  </section>

  <section id="mykle" class="page">
    <h2>Mykle 👑</h2>
    <p>Mykle (uttales med andakt) er en institusjon. Ikke bare i Fagblikk, men i livet. Han har sett mer, drukket mer, vært mer og visst mer enn de fleste. Hans blotte nærvær gir tyngde til enhver diskusjon og hans latter runger som klokker fra en trappist-kirke. Mykle ER. Og vi er takknemlige for det.</p>
    <div class="back-button" onclick="navigate('menu')">← Tilbake</div>
  </section>

  <section id="worldoffagcraft" class="page">
    <h2>World of Fagcraft: Kapittel 1</h2>
    <div id="rpg-container"></div>
    <div class="back-button" onclick="navigate('menu')">← Tilbake</div>
  </section>

  <footer>
    Laget for Fagblikks årlige faglige påfyll av fag – oktober 2025 🍺
  </footer>

  <script>
    const countdownEl = document.getElementById("countdown");
    const targetDate = new Date("2025-10-09T07:00:00");
    function updateCountdown() {
      const now = new Date();
      const diff = targetDate - now;
      if (diff <= 0) {
        countdownEl.textContent = "God tur! 🍻";
        return;
      }
      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      const minutes = Math.floor((diff / (1000 * 60)) % 60);
      const seconds = Math.floor((diff / 1000) % 60);
      countdownEl.textContent = `${days}d ${hours}t ${minutes}m ${seconds}s`;
    }
    setInterval(updateCountdown, 1000);
    updateCountdown();

    document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
      const id = checkbox.getAttribute('data-id');
      checkbox.checked = localStorage.getItem(id) === 'true';
      checkbox.addEventListener('change', () => {
        localStorage.setItem(id, checkbox.checked);
      });
    });

    function navigate(id) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    const engeCountEl = document.getElementById("enge-count");
    let engeCount = parseInt(localStorage.getItem("engeCount")) || 0;
    engeCountEl.textContent = engeCount;
    function incrementCounter() {
      engeCount++;
      engeCountEl.textContent = engeCount;
      localStorage.setItem("engeCount", engeCount);
    }

    let startY = 0;
    window.addEventListener('touchstart', (e) => {
      startY = e.touches[0].clientY;
    });
    window.addEventListener('touchend', (e) => {
      const endY = e.changedTouches[0].clientY;
      if (endY - startY > 100) {
        location.reload();
      }
    });

    // RPG SYSTEM
    const story = [
      {
        text: "Myklus drømmer seg bort en dag han holder en stige. Han kjenner tørsten komme. Heldigvis er det en fersk tank med Moldevann i Hiacen.",
        choices: [
          { text: "Ta en slurk Moldevann", next: 1 },
          { text: "Rister det av seg, kommer seg hjem, jekker seg en Hansa", next: "skumlos" },
          { text: "Lar stigen stå uholdt og kjører på Polet", next: 1 }
        ]
      },
      {
        text: "Myklus innser at det er DJ Høgz som er med ham. De drikker en Struise og DJ Høgz drar frem en Chihuahua. Det ringer på døren, og det er Russe_Chris.",
        choices: [
          { text: "Drikk opp ølen", next: 2 },
          { text: "Tilby Russe_Chris en belgisk øl", next: "skumlos" },
          { text: "Tilby Russe_Chris en Hansa", next: 2 }
        ]
      },
      {
        text: "Myklus sitter på Årø. Au pairen er på jobb.",
        choices: [
          { text: "Kjøpe 2 0,6 og lage hundelyder", next: 3 },
          { text: "Kjøpe Farris og en pakke tyggis", next: "gameover" },
          { text: "Kjøper 3 0,6 og en akevitt", next: 3 }
        ]
      },
      {
        text: "Myklus ankommer Brussel og møter Heim E. Vernet og hans hjelper Vegard Beid i Tax Free.",
        choices: [
          { text: "Fortsett kampen i kapittel 2...", next: "end" }
        ]
      },
      {
        id: "skumlos",
        text: "Du er i Skumløs-skogen. Her er glassholdet forferdelig og det serveres kun lunken Hansa.",
        choices: [
          { text: "Be til St. Bernardus", next: 0 }
        ]
      },
      {
        id: "gameover",
        text: "Skjebnen din er beseglet. Du blir sendt til Skumløs-skogen til evig forbannelse. Game over.",
        choices: [
          { text: "Start på nytt", next: 0 }
        ]
      }
    ];

    let currentStep = 0;
    const container = document.getElementById("rpg-container");
    function renderStep(stepId) {
      let step = story.find(s => s.id === stepId) || story[stepId];
      container.innerHTML = `<p>${step.text}</p>`;
      step.choices.forEach(choice => {
        const btn = document.createElement("div");
        btn.className = "choice-button";
        btn.textContent = choice.text;
        btn.onclick = () => renderStep(choice.next);
        container.appendChild(btn);
      });
    }
    renderStep(currentStep);
  </script>
</body>
</html>
